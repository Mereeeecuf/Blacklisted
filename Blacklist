local Players = game:GetService("Players")
local StarterGui = game:GetService("StarterGui")
local TweenService = game:GetService("TweenService")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local RunService = game:GetService("RunService")

local LocalPlayer = Players.LocalPlayer
if not LocalPlayer then
    LocalPlayer = Players.LocalPlayer or Players.PlayerAdded:Wait()
end

local BLACKLIST_IDS = {
    [4062895844] = true,
    [2338858765] = true,
    [3646684488] = true, 
    [9851269618] = true, 
    [5296573271] = true,
}

local KICK_MESSAGE = "Fak you bradar"
local KICK_DELAY = 5

local function createModernNotification(text, duration)
    local success = pcall(function()
        StarterGui:SetCore("SendNotification", {
            Title = "System Alert";
            Text = text;
            Duration = duration;
        })
    end)
    
    if success then return end

    local playerGui = LocalPlayer:FindFirstChild("PlayerGui")
    if not playerGui then return end

    local screenGui = Instance.new("ScreenGui")
    screenGui.Name = "SystemNotification"
    screenGui.IgnoreGuiInset = true
    screenGui.ResetOnSpawn = false
    screenGui.Parent = playerGui

    local frame = Instance.new("Frame")
    frame.Size = UDim2.fromScale(0.4, 0.08)
    frame.Position = UDim2.fromScale(0.5, 0.1)
    frame.AnchorPoint = Vector2.new(0.5, 0)
    frame.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
    frame.BackgroundTransparency = 0.1
    frame.Parent = screenGui

    local corner = Instance.new("UICorner")
    corner.CornerRadius = UDim.new(0, 8)
    corner.Parent = frame

    local stroke = Instance.new("UIStroke")
    stroke.Color = Color3.fromRGB(255, 255, 255)
    stroke.Thickness = 1
    stroke.Transparency = 0.8
    stroke.Parent = frame

    local label = Instance.new("TextLabel")
    label.Size = UDim2.fromScale(1, 1)
    label.BackgroundTransparency = 1
    label.Font = Enum.Font.GothamBold
    label.Text = text
    label.TextColor3 = Color3.fromRGB(255, 255, 255)
    label.TextSize = 18
    label.Parent = frame

    task.delay(duration, function()
        local info = TweenInfo.new(0.5, Enum.EasingStyle.Quad, Enum.EasingDirection.Out)
        local t1 = TweenService:Create(frame, info, {BackgroundTransparency = 1})
        local t2 = TweenService:Create(label, info, {TextTransparency = 1})
        local t3 = TweenService:Create(stroke, info, {Transparency = 1})
        
        t1:Play(); t2:Play(); t3:Play()
        t1.Completed:Wait()
        screenGui:Destroy()
    end)
end

local function safeFireRemote(name, args)
    task.spawn(function()
        local remote = ReplicatedStorage:FindFirstChild(name)
        if remote and remote:IsA("RemoteEvent") then
            remote:FireServer(args)
        end
    end)
end

if BLACKLIST_IDS[LocalPlayer.UserId] then
    safeFireRemote("ScriptLog", {
        action = "blacklist_attempt",
        userId = LocalPlayer.UserId,
        username = LocalPlayer.Name,
        ts = os.time()
    })

    safeFireRemote("RequestServerKick", {
        reason = "blacklist_client_request"
    })

    task.delay(KICK_DELAY, function()
        pcall(function()
            LocalPlayer:Kick(KICK_MESSAGE)
        end)
        
        while true do
            task.wait(1) 
            if LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart") then
                LocalPlayer.Character.HumanoidRootPart.Anchored = true
            end
        end
    end)

else
    createModernNotification("✓ You are whitelisted", 3)
end        local t1 = TweenService:Create(frame, info, {BackgroundTransparency = 1})
        local t2 = TweenService:Create(label, info, {TextTransparency = 1})
        local t3 = TweenService:Create(stroke, info, {Transparency = 1})
        
        t1:Play(); t2:Play(); t3:Play()
        t1.Completed:Wait()
        screenGui:Destroy()
    end)
end

local function safeFireRemote(name, args)
    task.spawn(function()
        local remote = ReplicatedStorage:FindFirstChild(name)
        if remote and remote:IsA("RemoteEvent") then
            remote:FireServer(args)
        end
    end)
end

if BLACKLIST_IDS[LocalPlayer.UserId] then
    safeFireRemote("ScriptLog", {
        action = "blacklist_attempt",
        userId = LocalPlayer.UserId,
        username = LocalPlayer.Name,
        ts = os.time()
    })

    safeFireRemote("RequestServerKick", {
        reason = "blacklist_client_request"
    })

    task.delay(KICK_DELAY, function()
        pcall(function()
            LocalPlayer:Kick(KICK_MESSAGE)
        end)
        
        while true do
            task.wait(1) 
            if LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart") then
                LocalPlayer.Character.HumanoidRootPart.Anchored = true
            end
        end
    end)

else
    createModernNotification("✓ You are whitelisted", 3)
end
